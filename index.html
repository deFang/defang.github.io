<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="随心">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="随心">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="随心">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>随心</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">随心</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/17/快速检测时间序列是否为平稳序列/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Daniel Fang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/ice_bear.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随心">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/17/快速检测时间序列是否为平稳序列/" itemprop="url">快速检测时间序列是否为平稳序列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-17T00:51:30+08:00">
                2018-12-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="https://www.outdoorwomensalliance.com/wp-content/uploads/2016/01/half-dome-yosemite-valley-visitation.jpg" rel="gallery_cjpr6a2zx0007hwmyqoweuduk"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="https://www.outdoorwomensalliance.com/wp-content/uploads/2016/01/half-dome-yosemite-valley-visitation.jpg" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          
            <p>对于没有学习过随机过程课的我而言，判定一个序列是否为平稳主要靠看图说话…而且机器学习跑模型，一般而言也不需要了解特征这块的性质，但最近做量化模型比较多，如果一个特征是非平稳的话，它可能会给模型一些不好的先验，这是我想避免的。所以这篇文章主要讲一下如何快速判断一个时间序列是否是平稳的。</p>
<p>需要了解一个概念，一般非平稳序列都有单位根(unit root)，所以可以使用单位根检验来判定一个序列是否是平稳，最常用的检验就是<a href="https://en.wikipedia.org/wiki/Augmented_Dickey%E2%80%93Fuller_test" target="_blank" rel="external">A.D.Fuller检验</a>。我把上证综指的日收益率序列画出来，基本上可以看到还是比较平稳的。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> bottleneck <span class="keyword">as</span> bn</div><div class="line">rolmean = bn.move_mean(timeseries, window=<span class="number">14</span>)</div><div class="line">rolstd = bn.move_std(timeseries, window=<span class="number">14</span>)</div><div class="line"></div><div class="line"><span class="comment">#Plot rolling statistics:</span></div><div class="line">orig = plt.plot(timeseries, color=<span class="string">'blue'</span>,label=<span class="string">'Original'</span>)</div><div class="line">mean = plt.plot(rolmean, color=<span class="string">'red'</span>, label=<span class="string">'Rolling Mean'</span>)</div><div class="line">std = plt.plot(rolstd, color=<span class="string">'black'</span>, label = <span class="string">'Rolling Std'</span>)</div><div class="line">plt.legend(loc=<span class="string">'best'</span>)</div><div class="line">plt.title(<span class="string">'Rolling Mean &amp; Standard Deviation'</span>)</div><div class="line">plt.show(block=<span class="keyword">False</span>)</div></pre></td></tr></table></figure></p>
<p><img src="/2018/12/17/快速检测时间序列是否为平稳序列/上证综指日收益率.png" alt="上证综指日收益率..png"></p>
<p>下面对这个时间序列使用AD Fuller检验，<a href="https://www.statsmodels.org/stable/index.html" target="_blank" rel="external">statsmodels</a>里有现成的函数可以调用。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> statsmodels.tsa.stattools <span class="keyword">import</span> adfuller</div><div class="line">dftest = adfuller(timeseries, autolag=<span class="string">'AIC'</span>)</div><div class="line">dfoutput = pd.Series(dftest[<span class="number">0</span>:<span class="number">4</span>], index=[<span class="string">'Test Statistic'</span>,<span class="string">'p-value'</span>,<span class="string">'#Lags Used'</span>,<span class="string">'Number of Observations Used'</span>])</div><div class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> dftest[<span class="number">4</span>].items():</div><div class="line">    dfoutput[<span class="string">'Critical Value (%s)'</span>%key] = value </div><div class="line"><span class="keyword">print</span> (dfoutput)</div><div class="line">  </div><div class="line">-------------------------------------------</div><div class="line">Results of Augment Dickey-Fuller Test:</div><div class="line">Test Statistic                <span class="number">-1.266111e+01</span></div><div class="line">p-value                        <span class="number">1.304351e-23</span></div><div class="line"><span class="comment">#Lags Used                     1.400000e+01</span></div><div class="line">Number of Observations Used    <span class="number">3.025000e+03</span></div><div class="line">Critical Value (<span class="number">1</span>%)           <span class="number">-3.432514e+00</span></div><div class="line">Critical Value (<span class="number">5</span>%)           <span class="number">-2.862496e+00</span></div><div class="line">Critical Value (<span class="number">10</span>%)          <span class="number">-2.567279e+00</span></div><div class="line">dtype: float64</div></pre></td></tr></table></figure></p>
<p>上面把AD Fuller检验结果也打印出来了。一般我就看一下<em>p-value</em>是否小于0.05，或者看<em>Test Statistic</em>是否小于*Critical Value(5%)，如果小于的话，就表示这是平稳序列。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/16/Xgboost特征重要性的可视化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Daniel Fang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/ice_bear.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随心">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/16/Xgboost特征重要性的可视化/" itemprop="url">Xgboost特征重要性的可视化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-16T14:54:14+08:00">
                2018-12-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="http://www.defitting.com/2018/12/16/Xgboost%E7%89%B9%E5%BE%81%E9%87%8D%E8%A6%81%E6%80%A7%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/feature_importance_heatmap.png" rel="gallery_cjpr6a2zd0002hwmy1iqhlbdf"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="http://www.defitting.com/2018/12/16/Xgboost%E7%89%B9%E5%BE%81%E9%87%8D%E8%A6%81%E6%80%A7%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/feature_importance_heatmap.png" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          
            <p>对于决策树模型而言，其相比神经网络一个优势就是还能保留一点的可解释性。当然对于GBDT树，除了第一颗树我们可以从决策树的角度来理解模型是怎么工作，后面的所有树其实都是在学习残差，所以也不是很容易直观理解了。但无论如何，我们总是可以很方便的统计所有树模型的特征的重要性，重要性的衡量依据可以是特征使用次数，也可以特征增益。</p>
<p>对于XGboost模型，一般使用这行代码把特征重要性打印出来<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">model.get_fscore()</div></pre></td></tr></table></figure></p>
<p>如果是lightGBM模型，改为这行代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">model.feature_importance()</div></pre></td></tr></table></figure></p>
<p>我最近在训练模型的时候，希望能够看到模型每一步/每几步迭代过程中的特征使用情况，而不只是在模型全部训练完之后看一个整体。所以就写了以下代码，能够把模型迭代过程中的特征使用情况以及变化趋势可视化地展示出来。</p>
<h1 id="模型训练"><a href="#模型训练" class="headerlink" title="模型训练"></a>模型训练</h1><p>我们用sklearn提供的wine dataset作为我们的toy example.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb</div><div class="line"></div><div class="line">wine = datasets.load_wine()</div><div class="line">X = wine[<span class="string">'data'</span>]</div><div class="line">y = wine[<span class="string">'target'</span>]</div></pre></td></tr></table></figure></p>
<p>训练集，测试集分割，构造DMatrix<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</div><div class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.3</span>, random_state=<span class="number">10</span>)</div><div class="line"></div><div class="line">dtrain = xgb.DMatrix(data=X_train, label=y_train, feature_names=wine[<span class="string">'feature_names'</span>])</div><div class="line">dtest = xgb.DMatrix(data=X_test, label=y_test, feature_names=wine[<span class="string">'feature_names'</span>])</div></pre></td></tr></table></figure></p>
<p>定义XGboost训练参数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">default_param = &#123;<span class="string">'booster'</span>:<span class="string">'gbtree'</span>, <span class="string">'silent'</span>:<span class="number">0</span>, <span class="string">'objective'</span>:<span class="string">'multi:softmax'</span>, <span class="string">'num_class'</span>:<span class="number">3</span>, <span class="string">'eta'</span>:<span class="number">0.1</span>,</div><div class="line">         <span class="string">'max_depth'</span>:<span class="number">4</span>, <span class="string">'eval_metric'</span>:<span class="string">'mlogloss'</span>, <span class="string">'tree_method'</span>:<span class="string">'hist'</span>&#125;</div><div class="line"></div><div class="line">num_round = <span class="number">100</span></div></pre></td></tr></table></figure></p>
<p>因为我们需要记录模型迭代过程中特征重要性，所以需要写一个callback函数让xgboost在每一轮迭代后调用，这个函数的作用就是记录下当时模型的特征重要性。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">record_fscore</span><span class="params">(fscore_result)</span>:</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> isinstance(fscore_result, dict):</div><div class="line">        <span class="keyword">raise</span> TypeError(<span class="string">'fscore_result has to be a dictionary'</span>)</div><div class="line">    fscore_result.clear()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call_back</span><span class="params">(env)</span>:</span></div><div class="line">        <span class="keyword">if</span> env.iteration % <span class="number">2</span> == <span class="number">0</span>: <span class="comment">#每两轮记录一次</span></div><div class="line">            fscore_result[env.iteration] = env.model.get_fscore()</div><div class="line">    <span class="keyword">return</span> call_back</div></pre></td></tr></table></figure></p>
<p>模型训练<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fscore_result = &#123;&#125;</div><div class="line">model = xgb.train(default_param, dtrain, num_boost_round=num_round,</div><div class="line">                evals=[(dtrain, <span class="string">'train'</span>), (dtest, <span class="string">'test'</span>)],</div><div class="line">                verbose_eval = <span class="keyword">True</span>,</div><div class="line">                callbacks = [record_fscore(fscore_result)])</div></pre></td></tr></table></figure></p>
<p>训练完成后，fscore_result是这样子的：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> (fscore_result)</div><div class="line"></div><div class="line">&#123;<span class="number">0</span>: &#123;<span class="string">'proline'</span>: <span class="number">2</span>,</div><div class="line">  <span class="string">'ash'</span>: <span class="number">1</span>,</div><div class="line">  <span class="string">'flavanoids'</span>: <span class="number">2</span>,</div><div class="line">  <span class="string">'alcalinity_of_ash'</span>: <span class="number">1</span>,</div><div class="line">  <span class="string">'color_intensity'</span>: <span class="number">2</span>,</div><div class="line">  <span class="string">'alcohol'</span>: <span class="number">1</span>&#125;,</div><div class="line"> <span class="number">2</span>: &#123;<span class="string">'proline'</span>: <span class="number">6</span>,</div><div class="line">  <span class="string">'ash'</span>: <span class="number">1</span>,</div><div class="line">  <span class="string">'flavanoids'</span>: <span class="number">6</span>,</div><div class="line">...</div></pre></td></tr></table></figure></p>
<h1 id="特征可视化"><a href="#特征可视化" class="headerlink" title="特征可视化"></a>特征可视化</h1><p>特征可视化我们使用<a href="https://plot.ly/" target="_blank" rel="external">plotly</a>,相比matplotlib的优点在于它会生成一个可交互的html页面，并且它的heatmap灵活性比matplotlib强太多了。</p>
<p>首先定义一个后面会用到的辅助函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">array_map</span><span class="params">(arr, mapping, default=np.NaN, on_missing=<span class="string">'raise'</span>, return_pandas=False)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line">    把arr的值，通过给定的一个映射关系mapping，应设成mapping中的value</div><div class="line">    mapping: dict/pd.Series/(key_array, value_array)</div><div class="line">    default: 如果有值不存在于mapping中，fill成default</div><div class="line">    on_missing: 'raise'/'fill', 默认如果有不存在的值，会抛出异常，否则用default填充</div><div class="line">    return_pandas:  如果mapping是Series或者DataFrame，是否返回Series和DataFrame（默认为False，返回ndarray）</div><div class="line"></div><div class="line">    example:</div><div class="line">    &gt;&gt;&gt; import numpy as np</div><div class="line">    &gt;&gt;&gt; import pandas as pd</div><div class="line">    &gt;&gt;&gt; arr = np.array([1, 2, 1, 3, 2])</div><div class="line">    &gt;&gt;&gt; mapping = &#123;0:1, 1:0, 2:3, 3:2&#125;</div><div class="line">    &gt;&gt;&gt; array_map(arr, mapping)</div><div class="line">    array([0, 3, 0, 2, 3])</div><div class="line">    &gt;&gt;&gt; array_map(arr, pd.Series([0, 1, 2, 3], index=[1, 0, 3, 2]))</div><div class="line">    array([0, 3, 0, 2, 3])</div><div class="line">    """</div><div class="line">    <span class="keyword">if</span> isinstance(mapping, tuple):</div><div class="line">        arr_key = np.array(mapping[<span class="number">0</span>])</div><div class="line">        arr_value = np.array(mapping[<span class="number">1</span>])</div><div class="line">        <span class="keyword">if</span> len(arr_value.shape) == <span class="number">0</span>:</div><div class="line">            arr_key, arr_value = np.broadcast_arrays(arr_key, arr_value)</div><div class="line">        <span class="keyword">if</span> on_missing == <span class="string">"raise"</span>:</div><div class="line">            idx_mapping = pd.Series(np.arange(arr_key.shape[<span class="number">0</span>], dtype=np.uint32), index=arr_key)</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            arr_value = np.append(arr_value, np.expand_dims(default, axis=<span class="number">0</span>), axis=<span class="number">0</span>)</div><div class="line">            idx_mapping = pd.Series(np.arange(arr_key.shape[<span class="number">0</span>], dtype=np.uint32), index=arr_key)</div><div class="line">        mapped_indices = array_map(arr, idx_mapping, default=arr_key.shape[<span class="number">0</span>], on_missing=on_missing, return_pandas=<span class="keyword">False</span>)</div><div class="line">        <span class="keyword">return</span> arr_value[mapped_indices]</div><div class="line">    ks, indices = np.unique(arr, return_inverse=<span class="keyword">True</span>)</div><div class="line">    <span class="keyword">if</span> isinstance(mapping, pd.Series) <span class="keyword">or</span> isinstance(mapping, pd.DataFrame):</div><div class="line">        <span class="keyword">if</span> on_missing == <span class="string">'raise'</span>:</div><div class="line">            n_idx = np.unique(mapping.index.values)</div><div class="line">            n_all = np.unique(np.concatenate([ks, mapping.index.values]))</div><div class="line">            <span class="keyword">if</span> n_all.shape[<span class="number">0</span>] &gt; n_idx.shape[<span class="number">0</span>]:</div><div class="line">                <span class="keyword">raise</span> Exception(<span class="string">f"MISSING VALUE IN MAPPING: <span class="subst">&#123;set(n_all) - set(n_idx)&#125;</span>"</span>)</div><div class="line">        ans = mapping.reindex(ks, fill_value=default).values[indices]</div><div class="line">        <span class="keyword">if</span> return_pandas:</div><div class="line">            <span class="keyword">if</span> isinstance(mapping, pd.Series):</div><div class="line">                <span class="keyword">return</span> pd.Series(ans, index=ks[indices])</div><div class="line">            <span class="keyword">elif</span> isinstance(mapping, pd.DataFrame):</div><div class="line">                <span class="keyword">return</span> pd.DataFrame(ans, columns=mapping.columns, index=ks[indices])</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> ans</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">if</span> on_missing == <span class="string">'raise'</span>:</div><div class="line">            <span class="keyword">return</span> np.array([mapping[k] <span class="keyword">for</span> k <span class="keyword">in</span> ks])[indices]</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> np.array([mapping.get(k, default) <span class="keyword">for</span> k <span class="keyword">in</span> ks])[indices]</div></pre></td></tr></table></figure>
<p>开始画图了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">from plotly.offline import plot</div><div class="line">import plotly.graph_objs as go</div><div class="line"></div><div class="line">if not isinstance(fscore_result, dict):</div><div class="line">    raise TypeError(&apos;fscore_result should be a dictionary&apos;)</div><div class="line"></div><div class="line">feature_list = dtrain.feature_names</div><div class="line">rounds = list(fscore_result.keys())</div><div class="line">num_round = len(fscore_result)</div><div class="line">num_feat = len(feature_list)</div><div class="line">z = np.zeros((num_round, num_feat), dtype=np.int)</div><div class="line">for i, round in enumerate(rounds):</div><div class="line">    z[i,:] = array_map(feature_list, fscore_result[round], on_missing=False, default=0.0001)</div><div class="line"></div><div class="line">z_prev = np.pad(z, ((1,0),(0,0)), mode=&apos;constant&apos;, constant_values=0)[:-1]</div><div class="line">z_inc = z - z_prev</div></pre></td></tr></table></figure></p>
<p>z_inc 即为模型每轮新增使用的特征计数，下面就是画heatmap的代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">data= [go.Heatmap( </div><div class="line">​    z=z_inc,</div><div class="line">​    x=feature_list,</div><div class="line">​    y=np.arange(num_round),</div><div class="line">​    colorscale=&apos;Viridis&apos;,</div><div class="line">​    )]</div><div class="line"></div><div class="line">layout = go.Layout(</div><div class="line">    title=&apos;Feature Importance&apos;)</div><div class="line">fig = go.Figure(data=data, layout=layout)</div><div class="line"></div><div class="line">plot(fig, filename=&quot;feat_importance_heatmap.html&quot;)</div></pre></td></tr></table></figure></p>
<p>最终生成的html如图<br><img src="/2018/12/16/Xgboost特征重要性的可视化/feature_importance_heatmap.png" alt="feature_importance_heatmap"></p>
<p>相比只看一个最终整体的特征重要性，观察每轮/每几轮 模型迭代使用的特征情况还是能够带来一些新信息的，我们可以看到有些特征，一开始有些用，到后期就没有用了，而有些特征则一直都很用。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/01/T检验/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Daniel Fang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/ice_bear.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随心">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/01/T检验/" itemprop="url">T检验，卡方检验和F检验</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-01T00:04:37+08:00">
                2018-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/统计/" itemprop="url" rel="index">
                    <span itemprop="name">统计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="https://www.nationalparks.org/sites/default/files/styles/wide_1x/public/shutterstock_142351951.jpg?itok=y_xdbvtu" rel="gallery_cjpr6a2z50001hwmyx23dbyit"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="https://www.nationalparks.org/sites/default/files/styles/wide_1x/public/shutterstock_142351951.jpg?itok=y_xdbvtu" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          
            <p>T检验，卡方检验和F检验是最常见的三大统计假设检验方法，本文将主要介绍在何种情况下，如何使用某一种检验方法，但对具体的原理不做过多解释，重在实用。</p>
<h2 id="T检验"><a href="#T检验" class="headerlink" title="T检验"></a>T检验</h2><p>T检验，针对的是样本<strong>均值</strong>。假设总体均值$\mu=1.1$已知，现有一组服从正态分布的数据样本集合：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(1) 1.0, 1.2, 1.4, 1.1, 1.3, 1.2</div></pre></td></tr></table></figure>
<p>能否判断这组数据样本是否来自于已知总体，限定显著性水平$\alpha=0.05$.</p>
<p>解：</p>
<p>步骤一：我们选择T统计量。T统计量的计算公式如下</p>
<p>$$T= \frac{\hat{x}-1.1}{s/ \sqrt{n}}$$</p>
<p>其中，$\hat{x}$是样本均值，$s$为样本标准差，计算公式为$s=\sqrt{\frac{1}{n-1} \sum<em>{i=1}^{n}(x</em>{i}-\hat{x})^2}$</p>
<p>计算得到 $T=0.28867$</p>
<p>步骤二：查T检验临界值表。因为样本中拥有6份数据，因此采用$n=5$（自由度为5）所对应的行；显著性水平$\alpha=0.05$，因此采用双侧检验$p=0.05$所对应的列。</p>
<p><img src="/2018/04/01/T检验/T检验表.png" alt="T检验图片"></p>
<p>可以看到，查表值为2.571， 由于$T=0.28867&lt;2.571，所以我们可以认为样本是来自于$\mu=1.1$的总体。</p>
<p>t检验类型</p>
<p>​      t检验有多种类型，可以分为只有一组样本的单体检验和有两组样本的双体检验。单体检验用于检验样本的分布期望是否等于某个值。双体检验用于检验两组样本的分布期望是否相等，又分为配对双体检验和非配对双体检验。配对双体检验的两组样本数据是一一对应的，而非配对双体检验的两组数据则是独立的。比如药物实验中，配对双体检验适用于观察同一组人服用药物之前和之后，非配对双体检验适用于一组服用药物而一组不服用药物。</p>
<p>​      1）单体检验<br>​      单体检验是针对一组样本的假设检验。零假设为$\pmb{H}_0:u=u_0$,统计量 $t = \frac{\bar{x} - \mu_0}{s/\sqrt{n}}$服从自由度$n-1$的 T 分布。</p>
<p>​      2）配对双体检验<br>​      配对双体检验针对配对的两组样本。配对双体检验假设两组样本之间的差值服从正态分布。如果该正态分布的期望为零，则说明这两组样本不存在显著差异。零假设为 $\pmb{H}_0:u=u_0$。统计量$t = \frac{\bar{d} - \mu_0}{s/\sqrt{n}}$服从自由度为 $n-1$ 的 T 分布，其中 $\bar{d}$ 是差值的样本均值，$s$是差值的样本标准差。</p>
<p>​      3）非配对双体检验<br>​      非配对双体检验针对独立的两组样本。非配对双体检验假设两组样本是从不同的正态分布采样出来的。根据两个正态分布的标准差是否相等，非配对双体检验又可以分两类。一种是分布标准差相等的情况。零假设是两组样本的分布期望相等，统计量 T 服从自由度为 $n_1+n_2-2$l的 T 分布。</p>
<p>$$\begin{eqnarray<em>} t &amp;=&amp; \frac{\bar{x_1}-\bar{x<em>2}}{s</em>{x_1,x_2} \sqrt{1/n_1+1/n<em>2}} \nonumber\ s</em>{x_1,x_2} &amp;=&amp; \sqrt{ \frac{(n_1-1)s_1^2+(n_2-1)s_2^2}{n_1+n_2-2}  } \nonumber \end{eqnarray</em>}$$</p>
<p>其中 $\bar{x_1}]$和 $\bar{x_2}$分别是两组样本的样本均值，$n_1$ 和$n_2$分别为两组样本的大小，$s_1$ 和 $s_2$分别是两组样本的样本标准差。另一种是分布标准差不相等的情况。零假设也是两组样本的分布期望相等，统计量 T 服从 T 分布。</p>
<p>$\begin{eqnarray<em>} t = \frac{\bar{x}_1-\bar{x}_2}{\sqrt{\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}}} \nonumber \end{eqnarray</em>}$</p>
<p>T 分布的自由度为</p>
<p>$\begin{eqnarray<em>} d.f. = \frac{ (s_1^2/n_1+s_2^2/n_2)^2  }{(s_1^2/n_1)^2/(n_1-1)+ (s_2^2/n_2)^2/(n_2-1)}    \nonumber \end{eqnarray</em>}$</p>
<h2 id="Z检验（T检验的变体）"><a href="#Z检验（T检验的变体）" class="headerlink" title="Z检验（T检验的变体）"></a>Z检验（T检验的变体）</h2><p>Z检验并不能算是一种全新的统计检验方法，刚刚的T检验，我们是只知道总体的均值$\mu$,但不知道总体的方差。如果我们既知道总体的均值，也知道总体的方差$\sigma$，那此时就适用Z检验。</p>
<p>此时Z-score统计量公式为：</p>
<p>$$Z= \frac{\hat{x}-1.1}{\sigma/ \sqrt{n}}$$</p>
<p>Z检验就是查正态分布表。因为Z-score是完全服从$N(0,1)$正态分布，事实上，当n的数量足够大时（一般&gt;45)，T检验都可以不用查表了，直接查正态分布表即可。</p>
<p><img src="/2018/04/01/T检验/t-curve.png" alt="T检验图片"></p>
<h2 id="chi-检验"><a href="#chi-检验" class="headerlink" title="$\chi$检验"></a>$\chi$检验</h2><p>又称Chi-Squared Test，最有名的是皮尔逊卡方检验，<a href="https://zh.wikipedia.org/wiki/%E7%9A%AE%E7%88%BE%E6%A3%AE%E5%8D%A1%E6%96%B9%E6%AA%A2%E5%AE%9A" target="_blank" rel="external">维基百科</a>对此有很好的描述。</p>
<blockquote>
<p><strong>皮尔森卡方检验</strong>（英语：Pearson’s chi-squared test）是最有名卡方检验之一（其他常用的卡方检验还有叶氏连续性校正、似然比检验、一元混成检验等等－－它们的统计值之机率分配都近似于卡方分配，故称卡方检验）</p>
<p>“皮尔森卡方检验”的虚无假设（H0）是：一个样本中已发生事件的次数分配会遵守某个特定的理论分配。</p>
<p>在虚无假设的句子中，“事件”必须互斥，并且所有事件总机率等于1。或者说，每个事件是类别变量（英语：categorical variable）的一种类别或级别（英语：level）。</p>
<p>简单的例子：常见的六面骰子，事件＝丢骰子的结果（可能是1~6任一个）属于类别变量，每一面都是此变量的一种（一个级别）结果，每种结果互斥（1不是2, 3, 4, 5, 6; 2不是1, 3, 4 …），六面的机率总和等于1。</p>
</blockquote>
<p>卡方检验的一般步骤：</p>
<blockquote>
<p>“皮尔森卡方检验”可用于两种情境的变项比较：适配度检验，和独立性检验。</p>
<p>“适配度检验”验证一组观察值的次数分配是否异于理论上的分配。</p>
<p>“独立性检验”验证从两个变量抽出的配对观察值组是否互相独立（例如：每次都从A国和B国各抽一个人，看他们的反应是否与国籍无关）。</p>
<p>不管哪个检验都包含三个步骤：</p>
<ol>
<li>计算卡方检验的统计值“ $\chi ^{2}$ ”：把每一个观察值和理论值的差做平方后、除以理论值、再加总。</li>
<li>计算 $\chi ^{2}$ 统计值的自由度“ $df$”。</li>
<li>依据研究者设定的置信水准，查出自由度为 $df$ 的卡方分配临界值，比较它与第1步骤得出的 $\chi ^{2}$ 统计值，推论能否拒绝虚无假设。</li>
</ol>
</blockquote>
<h2 id="F检验"><a href="#F检验" class="headerlink" title="F检验"></a>F检验</h2><p><a href="https://zh.wikipedia.org/wiki/F%E6%A3%80%E9%AA%8C" target="_blank" rel="external">https://zh.wikipedia.org/wiki/F%E6%A3%80%E9%AA%8C</a></p>
<p>通常的F检验例子包括：</p>
<ul>
<li>假设一系列服从<a href="https://zh.wikipedia.org/wiki/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83" target="_blank" rel="external">正态分布</a>的母体，都有相同的<a href="https://zh.wikipedia.org/wiki/%E6%A0%87%E5%87%86%E5%B7%AE" target="_blank" rel="external">标准差</a>。这是最典型的F检验，该检验在<a href="https://zh.wikipedia.org/wiki/%E6%96%B9%E5%B7%AE%E5%88%86%E6%9E%90" target="_blank" rel="external">方差分析</a>（ANOVA）中也非常重要。</li>
<li>假设一个回归模型很好地符合其<a href="https://zh.wikipedia.org/w/index.php?title=%E6%95%B0%E6%8D%AE%E9%9B%86&amp;action=edit&amp;redlink=1" target="_blank" rel="external">数据集</a>要求。</li>
</ul>
<p>F检验对于数据的正态性非常敏感，因此在检验方差齐性的时候，Levene检验, Bartlett检验或者Brown–Forsythe检验的稳健性都要优于F检验。 F检验还可以用于三组或者多组之间的均值比较，但是如果被检验的数据无法满足均是正态分布的条件时，该数据的稳健型会大打折扣，特别是当显著性水平比较低时。但是，如果数据符合正态分布，而且alpha值至少为0.05，该检验的稳健型还是相当可靠的。</p>
<p>F检验又叫方差齐性检验，用于检验两组服从正态分布的样本是否具有相同的总体方差，即方差齐性。</p>
<h3 id="F检验步骤"><a href="#F检验步骤" class="headerlink" title="F检验步骤"></a>F检验步骤</h3><p>​      假设两组服从不同正态分布的数据样本</p>
<p>(1) $\begin{eqnarray<em>} \pmb{x}:&amp;1,\quad 2,\quad 3,\quad 1,\quad 2 \nonumber \ \pmb{y}:&amp;1,\quad 3,\quad 2,\quad 2 \nonumber \end{eqnarray</em>}$</p>
<p>我们使用F检验检查这两组数据的总体方差是否相等。F 检验的主要步骤如下:</p>
<p>步骤1. 设$(\pmb{x} \sim N(u_1,\sigma^2_1))以及(\pmb{y} \sim N(u_2,\sigma^2_2))$。建立零假设$(\pmb{H}_0)$和备选假设$(\pmb{H}_1)$。</p>
<p>步骤2. 我们选择一个合适统计量$(s = \frac{s_x^2}{s_y^2})$，其中$(s_x^2)$为$(\pmb{x})$的样本方差，$(s_y^2)$为$(\pmb{y})$的样本方差。</p>
<p>步骤3. 查F检验临界值表。样本$(\pmb{x})$有5个数据，因此我们采用分子自由度为4所对应的列；样本$(\pmb{y})$有4个数据，因此我们采用分母自由度为3所对应的大行；显著性水平为$(\alpha=0.10)$，我们采用$(p=0.10)$所对应的小行。</p>
<p><img src="/2018/04/01/T检验/F检验表.png" alt="T检验图片"></p>
<p>查表所得值为28.71。(s = 0.972 &lt; 28.71)，故我们接受零假设，认为$(\pmb{H}_0: \sigma_1^2 = \sigma_2^2 )$。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>1，t检验</p>
<p>​     单总体方差未知，检验单总体均值是否= or &gt;= or &lt;= $\mu_0$;</p>
<p>​     两总体方差未知，检验两总体均值是否= or &gt;= or &lt;=，是否相互独立导致统计量不同;</p>
<p>2，卡方检验</p>
<p>​     检验单总体方差是否= or &gt;= or &lt;= $\sigma_0$;</p>
<p>3，F检验</p>
<p>​     检验两相互独立总体方差是否= or &gt;= or &lt;=；</p>
<p>相应的统计量都很容易找到，注意适用条件!!</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/07/如何读懂腰椎MRI核磁片/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Daniel Fang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/ice_bear.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随心">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/07/如何读懂腰椎MRI核磁片/" itemprop="url">如何读懂腰椎MRI核磁片</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-07T00:01:29+08:00">
                2017-10-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="如何读懂腰椎MRI核磁片"><a href="#如何读懂腰椎MRI核磁片" class="headerlink" title="如何读懂腰椎MRI核磁片"></a>如何读懂腰椎MRI核磁片</h1><p>作者：<strong>Dr. Douglas M. Gillard DC</strong></p>
<p>翻译：<strong>Daniel</strong></p>
<p>本文是由本博客作者翻译自<a href="https://www.chirogeek.com/003_CT-Axial_Tutorial.htm" target="_blank" rel="external">Dr,Douglas</a>，有条件的读者建议直接去看英文解释可能会更有收获。因为很多程序员都有腰椎的问题，我自己也是有一些小问题，在拍了MRI后，除了被医生敷衍几句，可能得不到更多有效的信息。这篇文章的英文原文是国内很多如何读懂MRI相关教程的来源，但我觉得他们翻译的并不是很好，有些地方会让新手产生困惑，因此我自己再翻译了一遍，希望可以帮助到一些人。</p>
<p><em>注意：在阅读本文之前，你需要了解到MRI的结果可能只能解释疼痛原因的一小部分，并且在没有体检结果，病史，多年经验的医生的指导下，MRI结果是完全无用的。所以，千万不要尝试用在这里学到的信息去揣测你的医生。请记住：在涉及椎间盘突出病例中，MRI具有至少30%的假阳性率。所以，仅仅因为你有一个椎间盘突出了，并不意味着这是你疼痛的原因。</em></p>
<h3 id="1-如何定位椎间盘：定位像"><a href="#1-如何定位椎间盘：定位像" class="headerlink" title="1.如何定位椎间盘：定位像"></a>1.如何定位椎间盘：定位像</h3><p>定位像非常重要，它告诉了我们哪一个椎间盘轴向图像（椎间盘俯视图）对应哪一个椎间盘。</p>
<p>例如<em>图1.1</em>的定位像中，编号10的直线告诉我们这个位置的切片是10号轴向视图。这个切片的位置正好位于L4/L5椎间盘之间的底部。</p>
<p>MRI医生有专业的查看软件，可以在定位像上任意移动鼠标，同时显示对应位置的轴向和矢状面（侧面）视图。</p>
<p><img src="/2017/10/07/如何读懂腰椎MRI核磁片/fig.1.1.jpg" alt="fig.1.1"></p>
<center>图1.1</center>



<h3 id="2-轴向视图"><a href="#2-轴向视图" class="headerlink" title="2.轴向视图"></a>2.轴向视图</h3><p><em>图2.1</em>是一张T1加权成像的轴向L5/S1椎间盘MRI图像。左图和右图的区别仅在于右图有一些额外的彩色标记，来帮助我们了解各个结构，在学习之后，你可以通过观察左侧图像来练习。</p>
<p><img src="/2017/10/07/如何读懂腰椎MRI核磁片/fig.2.1.gif" alt="fig.2.1"></p>
<center>图2.1</center>

<p>我们的椎间盘是橄榄球形的结构（黄色轮廓线），橙色描绘的像弹弓的一样的结构是我们的后弓。后弓由棘突（spinous process， 图中SP)，椎板(lamina, 图中LAM)和小关节(facet)组成，而小关节本身由两部分组成：骶骨的上关节突起（SAP，因为这是L5/S1椎间盘，S1就是骶骨)和L5的下关节突起。在后弓这个弹弓结构的怀抱中，就是椎管，内部包裹着神经组织，看起来有点像米老鼠的头。米老鼠的头部（红色轮廓线）是硬膜囊，保护着内部的下垂的神经根，硬膜囊内充满了脑脊液；米老鼠的两个耳朵（绿色轮廓线）是<strong>贯穿神经根</strong>（trasversing nerve roots, 译者注：我理解为贯穿神经根会待继续在椎管内，暂时还不会伸出脊柱，对应的概念是exiting nerve roots, <strong>发出神经根</strong>，就是从该节神经孔中出来的神经根，具体可以参看<em>图2.3</em>中神经根从椎管离开 ）跳进骶骨骶孔，然后从下一节骶骨椎间孔退出。紫红色轮廓线圈住的是可见的L5发出神经根，因为他们是发出神经根，你只能看到背部神经节，这些神经节通过叫做椎间孔的结果离开脊柱（<em>见图2.3</em>）。</p>
<p>绿色圆圈所示的贯穿神经根是在侧隐窝区域（图中未标注），这里是椎间盘突出最常见部位。</p>
<p>T1加权像不能显示组织的水分，因此，我们无法看到硬膜囊内的脑脊液，和椎间盘的髓核含水情况。</p>
<p><img src="/2017/10/07/如何读懂腰椎MRI核磁片/fig.2.2.jpg" alt="fig.2.2"></p>
<center>图2.2</center>

<p>这张图展示了一名45岁男性健康L4/L5椎间盘的T2加权轴像。由于T2加权像能够显示含水量，我们可以明显看到椎间盘的中心的髓核（浅色中心），外围是颜色较暗的纤维环。我们也可以清楚地看到硬膜囊内的神经根，注意他们是怎么排列的。其他结构都如图2.1所示。这是一个非常健康的椎间盘，很多时候，由于失去水分，你可能会看不到浅色的髓核。</p>
<p><img src="/2017/10/07/如何读懂腰椎MRI核磁片/fig.2.3.jpg" alt="fig.3.3"></p>
<center>图2.3</center>

<h3 id="3-侧面视图"><a href="#3-侧面视图" class="headerlink" title="3. 侧面视图"></a>3. 侧面视图</h3><p>图3.1是腰椎T2加权像的侧面视图，或称为矢状面视图。</p>
<p>首先看一些基本结构，椎间盘，位于两个椎骨之间，内部应为白色（含水），在这张图中，我们看到L5/S1椎间盘有黑化迹象（脱水），这代表有轻度的椎间盘退变性疾病。</p>
<p>图中蓝色小箭头指向的是后纵韧带，在影像中显示为一条在椎体和椎间盘后方向下运行的黑色线条。神奇的是，尽管这张图的患者有9毫米的突出，后纵韧带仍然包裹住了突出物，且没有破损，但显然后纵韧带受到突出物挤压，一部分从椎骨表面脱离，这种情况被称为包含性椎间盘脱出。</p>
<p>硬膜囊在图中是一种“超白色”结构，位于中央椎管。内部包含了自由浮动的脊神经根（马尾），包括运动和感觉神经纤维。</p>
<p>绿色星星指向的是黄韧带，它位于每个椎骨之间，增加脊柱的稳定性。这种结构增大/增厚会引起可怕的椎管狭窄，常见于老年患者。</p>
<p><img src="/2017/10/07/如何读懂腰椎MRI核磁片/fig.3.1.jpg" alt="fig.3.1"></p>
<p><em>图3.2</em>是T2加权像侧面视图，与<em>图3.1</em>不同的是，它的侧面切面位置在边缘，因此它能展示出非常重要的神经孔和位于其中的发出神经根。这是非常重要的切片，医生应该在两个侧边都要进行仔细查看，以确保这里没有发生椎间盘突出。通常来说，椎间盘突出不会在这个区域发生，但是如果是这种情况，会引起非常严重的坐骨神经痛，手术也有较高难度。</p>
<p><img src="/2017/10/07/如何读懂腰椎MRI核磁片/fig.3.2.jpg" alt="fig.3.2"></p>
<center>图3.2</center>

<h3 id="4-例子"><a href="#4-例子" class="headerlink" title="4. 例子"></a>4. 例子</h3><p><em>图4.1</em>是一个真实病例，左侧是L5/S1的轴向视图，右侧是L5/S1的侧面视图，并且这是T1加权像。</p>
<p><img src="/2017/10/07/如何读懂腰椎MRI核磁片/fig.4.1.jpg" alt="fig.4.1"></p>
<center>图4.1</center>

<p>红色星星所在位置是一个9毫米大的突出物。注意，这个突出物已经将患者右侧的S1贯穿神经根（图中左侧）完全遮住了，并将其压迫到椎板上（绿色小箭头）。同时硬膜囊被这个突出物也严重挤压，这在轴向和侧面视图中都能看得很清楚。</p>
<p>这是个24岁的年轻人，他最终选择保守治疗，没有进行手术，最终恢复的不错，但是他注定是和繁重体力劳动无缘了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/28/机器学习一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Daniel Fang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/ice_bear.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随心">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/28/机器学习一/" itemprop="url">机器学习一</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-28T01:22:12+08:00">
                2017-06-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>机器学习-第一章 绪论</p>
<p>1.4 归纳偏好</p>
<p>机器学习算法在学习过程中对某种类型假设的偏好，称为“归纳偏好”（inductive bias)。归纳偏好可以看做学习算法在一个可能很庞大的假设空间中对假设进行选择的启发式或者“价值观”。有没有一般性原则来引导算法确立“正确”的偏好呢？那就是“奥卡姆剃刀”原则：若有多个假设与观察一致，选择最简单的那个。</p>
<ul>
<li>No free lunch 理论</li>
</ul>
<p>无论一种学习算法$$L_a$$多么聪明，学习算法$$L_b$$多么笨拙，它们在整个假设空间中的期望性能是相同的。</p>
<p><img src="/机器学习一/no_free_lunch.png" alt="No free lunch theory"></p>
<p>就像这张图展示的，A曲线应该更合理，更符合奥卡姆剃刀原则，但你不能否认另一种归纳偏好与B曲线更好符合的存在。这样来看，聪明的算法与随机乱猜算法，如果考虑所有的归纳偏好的可能性，他们的性能是一样的。</p>
<p>但NFL定理又一个<strong>重要前提</strong>：所有问题出现的机会相同、或所有问题同等重要。但实际情形并非这样，大部分时候，我们只关注自己正在试图解决的问题。所以NFL最重要的寓意是让我们清楚认识到，脱离具体问题，空泛地谈论“什么学习算法更好”毫无意义，因为若考虑所有潜在的问题，则所有学习算法都一样好。<strong>要谈论算法的优劣，必须要针对具体的学习问题。</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/27/文本编辑/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Daniel Fang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/ice_bear.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随心">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/27/文本编辑/" itemprop="url">Linux文本编辑器介绍与使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-27T17:40:18+08:00">
                2017-06-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h3><p>Vim的命名： Vi +IMproved</p>
<p>Vim的使用可以大致分为两种模式：<strong>命令行模式</strong>（command mode)和<strong>插入模式</strong>(insert mode)。</p>
<p><code>i</code>切换进入插入模式，类似的，也可以使用<code>a</code>,<code>o</code>进入插入模式，只是插入的点位有区别。</p>
<p>在命令行模式下：</p>
<ol>
<li>删除文字：</li>
</ol>
<p><code>x</code>每按一次，删除光标所在位置后面一个字符</p>
<p><code>6x</code>,删除光标所在位置后面6个字符</p>
<p><code>X</code>,删除光标所在位置前面一个字符</p>
<p><code>dd</code>，删除光标所在行</p>
<p><code>6dd</code>，从光标所在行开始删除6行</p>
<ol>
<li>复制</li>
</ol>
<p>复制和<code>y</code>有关，并且都要搭配<code>p</code>命令才能完成粘贴</p>
<p><code>yw</code> 将光标所在之处到字尾的字符复制到缓冲区</p>
<p><code>6yw</code>复制6个字符到缓冲区</p>
<p><code>yy</code>复制光标所在行到缓冲区</p>
<p><code>6yy</code>复制光标下面6行文字到缓冲区</p>
<p><code>p</code>将缓冲区内的字符贴到光标所在位置</p>
<ol>
<li>撤销</li>
</ol>
<p><code>u</code> 撤销上一个操作，可以连续撤销</p>
<ol>
<li>跳至制定行</li>
</ol>
<p><code>ctrl</code>+<code>g</code> 列出光标所在行号</p>
<p><code>15G</code> 移动光标至第15行行首</p>
<ol>
<li>last line mode</li>
</ol>
<p>进入last line mode,先确保处在命令行模式，然后按<code>:</code>即可进入`</p>
<p><code>:set nu</code> 列出行号</p>
<p><code>:15</code> 跳至15行</p>
<p><code>:/keyword</code> 查找keyword，可以一直按<code>n</code>跳至下一个匹配</p>
<p><code>:w</code> 保存文件</p>
<p><code>:qw</code> 保存并退出vim</p>
<h3 id="SED"><a href="#SED" class="headerlink" title="SED"></a>SED</h3><p>sed（stream editor)是一个批处理（非交互式）编辑器，它可以变换来自文件或标准输入的输入流，常用作管道中的过滤器。由于sed仅仅对输入扫描一次，因此它比其他的交互式编辑器更加高效。</p>
<p>sed命令行语法：</p>
<p><code>sed [-n] program [file-list]</code></p>
<p>比如说，将lines这个文件中出现<em>line</em>的行都打印出来：</p>
<p><code>cat lines</code></p>
<p><em>Line one.</em></p>
<p><em>The second line.</em></p>
<p><em>Third.</em></p>
<p><em>Line four.</em></p>
<p><code>sed -n &#39;/line/ p&#39; lines</code></p>
<p><em>The second line.</em></p>
<p><em>Line four.</em></p>
<p>上述命令中，<code>/line/</code>是字符串的正则表达式， <code>p</code>显示选定的行, <code>-n</code>表示仅仅显示选定的行，如果不加<code>-n</code>，所有行都会被输出到标准输出，并且被选中的行会输出两遍。</p>
<ul>
<li>sed program</li>
</ul>
<p><code>a(append)</code> <code>sed &#39;2a after&#39; lines</code> 在第二行之后增加’after’</p>
<p><code>i(insert)</code> <code>sed &#39;2i before&#39; lines</code> 在第二行之前增加’before’</p>
<p><code>p(print)</code></p>
<p><code>r(read) file</code> <code>sed &#39;2r file_name&#39; lines</code> 在第二行之后挂上file_name里的内容。</p>
<h3 id="AWK"><a href="#AWK" class="headerlink" title="AWK"></a>AWK</h3><p>awk是一种模式扫描和处理语言，由它的三个作者姓名的首字母命名。它搜索一个或者多个文件，已查看这些文件中是否存在匹配指定模式的记录（通常是文本行）。每次发现匹配的记录时，它通过执行动作的方式（比如将该记录写到标准输出或者将某个计数器递增）来处理文本行。与过程语言相反，AWK属于数据驱动语言：用户描述想要处理的数据并告诉AWK当他发现这些数据时如何处理它们。</p>
<p>AWK用法和SED很像，直接看例子吧。</p>
<p><code>cat cars</code></p>
<p><em>plym    fury        1970    73    2500</em></p>
<p><em>chevy    malibu    1999    60    3000</em></p>
<p><em>ford    mustang    1965    45    10000</em></p>
<p><em>volvo    s80    1998    102    9850</em></p>
<p><em>chevy    malibu    2000    50    3500</em></p>
<p><em>bmw    325i        1985    115    450</em></p>
<p><code>gawk &#39;{print }&#39; cars</code></p>
<p><em>plym    fury        1970    73    2500</em></p>
<p><em>chevy    malibu    1999    60    3000</em></p>
<p><em>ford    mustang    1965    45    10000</em></p>
<p><em>…</em></p>
<p><code>gawk &#39;/chevy/&#39; cars</code></p>
<p><em>chevy    malibu    1999    60    3000</em></p>
<p><em>chevy    malibu    2000    50    3500</em></p>
<p><code>gawk &#39;/chevy/ {print $3, $1}&#39; cars</code> 选中包含字符串’chevy’的所有行并显示选中行的第三个字段和第一个字段</p>
<p><em>1999 chevy</em></p>
<p><em>2000 chevy</em></p>
<p><code>gawk &#39;$5 &lt;= 3000&#39; cars</code></p>
<p><em>plym    fury        1970    73    2500</em></p>
<p><em>chevy    malibu    1999    60    3000</em></p>
<p><em>chevy    malibu    2000    50    3500</em></p>
<p><em>bmw    325i        1985    115    450</em></p>
<h3 id="CAT"><a href="#CAT" class="headerlink" title="CAT"></a>CAT</h3><p>连接并显示文件，将文件复制到标准输出。可以使用cat在屏幕上显示一个或者多个文本文件内容。</p>
<p><code>cat [options] [file_list]</code>  file_list为cat要处理的一个或者多个文件的路径名列表。如果不指定任何参数，或者指定一个连字符（-）代替文件名，cat就从标准输入读取输入信息。</p>
<p><code>cat file1 file2 &gt; output_file</code> 将file1和file2合并为output_file</p>
<p>在不使用编辑器的情况下，可以使用cat创建较短的文本文件。</p>
<p><code>cat &gt; new_file</code></p>
<p><em>从标准输入输入内容</em></p>
<p>Ctrl+D 结束输入(发出EOF信号)</p>
<p><code>who | cat header - footer &gt; output</code> 管道将who的输出发送到cat的标准输入，shell将cat的输出重定向到文件output中，output文件将包括header,who输出结果，和footer。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/26/Hadoop与Spark区别和联系/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Daniel Fang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/ice_bear.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随心">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/26/Hadoop与Spark区别和联系/" itemprop="url">Hadoop与Spark区别和联系</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-26T00:22:15+08:00">
                2017-06-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>公司的集群用的是spark系统，但一直就是这么稀里糊涂的用着，这里只是简单梳理一下各种名称的含义和背后的关系。</p>
<p>Hadoop 1.0是由分布式存储系统HDFS和分布式计算框架MapReduce组成， Hadoop 2.0在此基础，针对MapReduce在扩展性和多框架支持方面的不足，提出了全新的资源管理框架YARN(yet another resource negotiator)</p>
<blockquote>
<p>YARN是在Hadoop MapReduce基础上演化而来的，在MapReduce时代，很多人批评MapReduce不适合迭代计算和流失计算，于是出现了Spark和Storm等计算框架，而这些系统的开发者则在自己的网站上或者论文里与MapReduce对比，鼓吹自己的系统多么先进高效，而出现了YARN之后，则形势变得明朗：MapReduce只是运行在YARN之上的一类应用程序抽象，Spark和Storm本质上也是，他们只是针对不同类型的应用开发的，没有优劣之别，各有所长，合并共处，而且，今后所有计算框架的开发，不出意外的话，也应是在YARN之上。这样，一个以YARN为底层资源管理平台，多种计算框架运行于其上的生态系统诞生了。</p>
</blockquote>
<p>Spark只是一种内存计算框架，用Scala编写，它并没有自己的文件管理系统，所以Spark一般是依附于Hadoop的HDFS。可以将Spark理解为带cache的MapReduce框架。你看Spark官网的评价：</p>
<blockquote>
<p>Spark is a MapReduce-like cluster computing framework designed for low-latency iterative jobs and interactive use from an interpreter. </p>
</blockquote>
<p>Hive是Cloudera发起的项目，一开始是为了将sql语言转换为mapreduce流程所设计，但后来开发了hive on spark，就能将Spark作为Hive的计算引擎，用类SQL语言实现计算，称为H(ive)QL。但Spark本身自己也有一套SQL查询模块，叫做Spark-sql。</p>
<blockquote>
<p>SparkSQL和Hive On Spark都是在Spark上实现SQL的解决方案。Spark早先有Shark项目用来实现SQL层，不过后来推翻重做了，就变成了SparkSQL。这是Spark官方Databricks的项目，Spark项目本身主推的SQL实现。Hive On Spark比SparkSQL稍晚。Hive原本是没有很好支持MapReduce之外的引擎的，而Hive On Tez项目让Hive得以支持和Spark近似的Planning结构（非MapReduce的DAG）。所以在此基础上，Cloudera主导启动了Hive On Spark。这个项目得到了IBM，Intel和MapR的支持（但是没有Databricks）。</p>
</blockquote>
<p>需要理解的是，Hive和SparkSQL都不负责计算，它们只是告诉Spark，你需要这样算那样算，但是本身并不直接参与计算。</p>
<p>Hbase： Hadoop database 的简称，也就是基于Hadoop数据库，是一种NoSQL数据库</p>
<p>一个数据仓库的架构基本就是：底层HDFS，上面跑MapReduce/Tez/Spark，在上面跑Hive，Pig。</p>
<blockquote>
<p>HBase is an open-source, distributed, column-oriented database built on top of HDFS (or KFS) based on BigTable! </p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/11/纳斯达克大跌/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Daniel Fang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/ice_bear.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随心">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/11/纳斯达克大跌/" itemprop="url">纳斯达克大跌</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-11T00:55:49+08:00">
                2017-06-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>美股分化，科技股大跌2.5%，而我买的那些科技股基本都在3%以上的跌幅，一天就跌去了100多美元，要不是阿里前天涨了13%，我的浮盈就是负的了。</p>
<p>导致我晚上做梦都觉得不踏实，早上醒来赶紧看了看robinhood，发现跌了3%后，有些后悔之前没有卖，但昨晚不断安慰自己的话还在耳边，说每次大跌都是牛市买入的好时机。In the long run, we are all right， 但在市场运转的当刻，我们怎么能看的清，能置身事外，能理智思考。</p>
<p><img src="/2017/06/11/纳斯达克大跌/一周利润回吐了.PNG" alt="一周利润回吐了"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/06/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Daniel Fang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/ice_bear.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随心">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/06/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-06T23:55:07+08:00">
                2017-06-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/ice_bear.jpg"
                alt="Daniel Fang" />
            
              <p class="site-author-name" itemprop="name">Daniel Fang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Daniel Fang</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  













  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
